<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>WeHelp Week 1 – R1 + R2 + R3</title>
<style>
  :root{
    --base:20px;
    --gap:20px;
    --ink:#111827;
    --muted:#cbd5e1;
    --overlay:rgba(0,0,0,.45);
    --light-blue:#d9ecf6;

    --container-w:1200px;  /* R1 固定版心 */
    --hero-h:250px;
    --bar-h:50px;
    --block-h:180px;
  }

  html{font-size:var(--base)}
  body{
    margin:0; color:var(--ink);
    font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;
    line-height:1.5; background:#fff; overflow-x:hidden;
  }

  /* ====== Navbar（共用） ====== */
  .navbar{
    width:100%; border-bottom:1px solid var(--muted); background:#fff;
    position:sticky; top:0; z-index:10;
  }
  .nav-inner{
    display:flex; align-items:center; justify-content:space-between;
    min-height:50px; padding:0 12px; width:100%; box-sizing:border-box;
  }
  .brand{font-weight:700}
  .menu{display:flex; gap:20px; list-style:none; margin:0; padding:0}
  .menu a{color:inherit; text-decoration:none}
  .menu a:hover{text-decoration:underline}

  /* 漢堡預設隱藏（桌面與平板） */
  .burger{
    display:none; width:36px; height:36px;
    align-items:center; justify-content:center;
    border:0; background:transparent; cursor:pointer;
  }
  .burger svg{width:22px; height:22px}

  /* ====== 抽屜（共用） ====== */
  .drawer{
    position:fixed; top:0; right:0; bottom:0;   /* 覆蓋整個視窗高度 */
    width:min(80vw, 320px);
    background:#fff; border-left:1px solid var(--muted);
    transform:translateX(100%); transition:transform .3s ease;
    display:flex; flex-direction:column; padding:16px 16px 24px;
    z-index:9999;
  }
  .drawer.open{ transform:translateX(0); }

  .drawer-close{
    position:absolute; top:8px; right:8px;
    width:36px; height:36px; display:grid; place-items:center;
    border:0; background:transparent; cursor:pointer; z-index:10000;
  }
  .drawer-close svg{ width:22px; height:22px; }
  .drawer-nav{
    list-style:none; padding:0; margin:40px 0 0;   /* 留距離避開 X */
    display:flex; flex-direction:column; gap:16px;
  }
  .drawer-nav a{ color:inherit; text-decoration:none; }

  /* ====== Hero ====== */
  .hero{
    width:100%; height:var(--hero-h);
    display:grid; place-items:center; text-align:center;
    background:var(--light-blue); border-bottom:1px solid var(--muted);
  }
  .hero h1{margin:0; font-size:2em; font-weight:700} /* 2× base = 40px */

  /* ====== 主內容共用 ====== */
  main{margin:0 auto; padding:20px 0; box-sizing:border-box}

  /* Bars（共用樣式） */
  .bars{display:grid; gap:var(--gap); margin-bottom:var(--gap)}
  .bar{
    display:flex; align-items:center; gap:var(--gap);
    height:var(--bar-h); border:1px solid var(--muted);
    background:#e9f2f8; overflow:hidden;
  }
  .bar img{width:80px; height:100%; object-fit:cover; display:block; flex:0 0 80px}
  .bar-title{margin:0; font-size:.95rem}
  #bar1{grid-area:bar1} #bar2{grid-area:bar2} #bar3{grid-area:bar3}

  /* Blocks（10 張 .card） */
  .blocks{display:grid; gap:var(--gap)}
  .card{
    position:relative; height:var(--block-h);
    border:1px solid var(--muted); background:#fff; overflow:hidden; isolation:isolate;
  }
  .card-bg{position:absolute; inset:0; background-size:cover; background-position:center}
  .caption{
    position:absolute; left:0; right:0; bottom:0; height:30px;
    background:var(--overlay); color:#fff; display:flex; align-items:center; justify-content:center;
    font-weight:600; white-space:nowrap; text-overflow:ellipsis; overflow:hidden;
  }
  .star{
    position:absolute; top:0; right:0; width:22px; height:22px;
    display:grid; place-items:center; background:rgba(255,255,255,.8);
    z-index:2; cursor:pointer; user-select:none;
  }
  .star svg{width:14px; height:14px; stroke:#0f172a; fill:none; transition:.25s}
  .star[data-active="true"] svg{stroke:gold; fill:gold} /* 點擊變金色 */

  /* ============ R3：360–600 ============ */
  @media (min-width:360px) and (max-width:600px){
    main{width:90%}
    /* 導覽列：隱藏清單、顯示漢堡 */
    .menu{display:none}
    .burger{display:flex}

    /* Bars：直排一欄 */
    .bars{
      grid-template-columns:1fr;
      grid-template-areas:
        "bar1"
        "bar2"
        "bar3";
    }
    /* Blocks：直排一欄 */
    .blocks{grid-template-columns:1fr}
  }

  /* ============ R2：601–1200 ============ */
  @media (min-width:601px) and (max-width:1200px){
    main{width:90%; max-width:1200px}
    .menu{display:flex}
    .burger{display:none}

    /* Bars：第一列兩欄(1/2+1/2)，第二列單欄(100%) */
    .bars{
      grid-template-columns:1fr 1fr;
      grid-template-areas:
        "bar1 bar2"
        "bar3 bar3";
    }

    /* Blocks：4 欄；最後兩張各佔 2 欄（= 50%） */
    .blocks{grid-template-columns:repeat(4,1fr)}
    .blocks .card:nth-last-child(-n+2){grid-column:span 2}
  }

  /* ============ R1：1201–1920 ============ */
  @media (min-width:1201px) and (max-width:1920px){
    main{width:var(--container-w)} /* 固定 1200px */

    /* Bars：第一列 100%，第二列 2/3 + 1/3 */
    .bars{
      grid-template-columns:2fr 1fr;
      grid-template-areas:
        "bar1 bar1"
        "bar2 bar3";
    }

    /* Blocks：5 欄；第一欄雙倍寬（= 1/3）且每欄兩張 */
    .blocks{
      grid-template-columns:2fr 1fr 1fr 1fr 1fr;  /* 第一欄兩倍寬 */
      grid-template-rows:repeat(2, var(--block-h));
      grid-auto-flow:column; /* 逐欄填入：每欄兩張，對齊邊界 */
    }
  }
</style>
</head>
<body>
  <!-- Navbar -->
  <nav class="navbar" role="navigation">
    <div class="nav-inner">
      <div class="brand">My Website</div>
      <ul class="menu" aria-label="Primary">
        <li><a href="#">Item 1</a></li>
        <li><a href="#">Item 2</a></li>
        <li><a href="#">Item 3</a></li>
        <li><a href="#">Item 4</a></li>
      </ul>
      <!-- R3：漢堡按鈕 -->
      <button class="burger" aria-label="Open menu" aria-controls="drawer" aria-expanded="false">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M4 6h16M4 12h16M4 18h16"/>
        </svg>
      </button>
    </div>
  </nav>

  <!-- R3：右側全高抽屜選單 -->
  <aside id="drawer" class="drawer" aria-hidden="true">
    <button class="drawer-close" aria-label="Close menu">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M6 6l12 12M18 6L6 18"/>
      </svg>
    </button>
    <ul class="drawer-nav">
      <li><a href="#">Item 1</a></li>
      <li><a href="#">Item 2</a></li>
      <li><a href="#">Item 3</a></li>
      <li><a href="#">Item 4</a></li>
    </ul>
  </aside>

  <!-- Hero -->
  <header class="hero">
    <h1>Welcome to MyHome</h1>
  </header>

  <main>
    <!-- Bars -->
    <section class="bars" aria-label="Promotions">
      <article class="bar" id="bar1">
        <img src="https://picsum.photos/seed/b1/800/600" alt="">
        <p class="bar-title">Promotion 1</p>
      </article>
      <article class="bar" id="bar2">
        <img src="https://picsum.photos/seed/b1/800/600" alt="">
        <p class="bar-title">Promotion 2</p>
      </article>
      <article class="bar" id="bar3">
        <img src="https://picsum.photos/seed/b1/800/600" alt="">
        <p class="bar-title">Promotion 3</p>
      </article>
    </section>

    <!-- Blocks（10 張圖片，列表） -->
    <section class="blocks" aria-label="Content blocks">
      <div class="card"><div class="card-bg" style="background-image:url('https://picsum.photos/seed/b1/800/600');"></div><div class="star" data-active="false"><svg viewBox="0 0 24 24" fill="none" stroke="#0f172a" stroke-width="1.5"><path d="M12 17.27 18.18 21l-1.64-7.03L22 9.24l-7.19-.62L12 2 9.19 8.62 2 9.24l5.46 4.73L5.82 21z"/></svg></div><div class="caption">Title 1</div></div>
      <div class="card"><div class="card-bg" style="background-image:url('https://picsum.photos/seed/b1/800/600');"></div><div class="star" data-active="false"><svg viewBox="0 0 24 24" fill="none" stroke="#0f172a" stroke-width="1.5"><path d="M12 17.27 18.18 21l-1.64-7.03L22 9.24l-7.19-.62L12 2 9.19 8.62 2 9.24l5.46 4.73L5.82 21z"/></svg></div><div class="caption">Title 2</div></div>
      <div class="card"><div class="card-bg" style="background-image:url('https://picsum.photos/seed/b1/800/600');"></div><div class="star" data-active="false"><svg viewBox="0 0 24 24" fill="none" stroke="#0f172a" stroke-width="1.5"><path d="M12 17.27 18.18 21l-1.64-7.03L22 9.24l-7.19-.62L12 2 9.19 8.62 2 9.24l5.46 4.73L5.82 21z"/></svg></div><div class="caption">Title 3</div></div>
      <div class="card"><div class="card-bg" style="background-image:url('https://picsum.photos/seed/b1/800/600');"></div><div class="star" data-active="false"><svg viewBox="0 0 24 24" fill="none" stroke="#0f172a" stroke-width="1.5"><path d="M12 17.27 18.18 21l-1.64-7.03L22 9.24l-7.19-.62L12 2 9.19 8.62 2 9.24l5.46 4.73L5.82 21z"/></svg></div><div class="caption">Title 4</div></div>
      <div class="card"><div class="card-bg" style="background-image:url('https://picsum.photos/seed/b1/800/600');"></div><div class="star" data-active="false"><svg viewBox="0 0 24 24" fill="none" stroke="#0f172a" stroke-width="1.5"><path d="M12 17.27 18.18 21l-1.64-7.03L22 9.24l-7.19-.62L12 2 9.19 8.62 2 9.24l5.46 4.73L5.82 21z"/></svg></div><div class="caption">Title 5</div></div>
      <div class="card"><div class="card-bg" style="background-image:url('https://picsum.photos/seed/b1/800/600');"></div><div class="star" data-active="false"><svg viewBox="0 0 24 24" fill="none" stroke="#0f172a" stroke-width="1.5"><path d="M12 17.27 18.18 21l-1.64-7.03L22 9.24l-7.19-.62L12 2 9.19 8.62 2 9.24l5.46 4.73L5.82 21z"/></svg></div><div class="caption">Title 6</div></div>
      <div class="card"><div class="card-bg" style="background-image:url('https://picsum.photos/seed/b1/800/600');"></div><div class="star" data-active="false"><svg viewBox="0 0 24 24" fill="none" stroke="#0f172a" stroke-width="1.5"><path d="M12 17.27 18.18 21l-1.64-7.03L22 9.24l-7.19-.62L12 2 9.19 8.62 2 9.24l5.46 4.73L5.82 21z"/></svg></div><div class="caption">Title 7</div></div>
      <div class="card"><div class="card-bg" style="background-image:url('https://picsum.photos/seed/b1/800/600');"></div><div class="star" data-active="false"><svg viewBox="0 0 24 24" fill="none" stroke="#0f172a" stroke-width="1.5"><path d="M12 17.27 18.18 21l-1.64-7.03L22 9.24l-7.19-.62L12 2 9.19 8.62 2 9.24l5.46 4.73L5.82 21z"/></svg></div><div class="caption">Title 8</div></div>
      <div class="card"><div class="card-bg" style="background-image:url('https://picsum.photos/seed/b1/800/600');"></div><div class="star" data-active="false"><svg viewBox="0 0 24 24" fill="none" stroke="#0f172a" stroke-width="1.5"><path d="M12 17.27 18.18 21l-1.64-7.03L22 9.24l-7.19-.62L12 2 9.19 8.62 2 9.24l5.46 4.73L5.82 21z"/></svg></div><div class="caption">Title 9</div></div>
      <div class="card"><div class="card-bg" style="background-image:url('https://picsum.photos/seed/b1/800/600');"></div><div class="star" data-active="false"><svg viewBox="0 0 24 24" fill="none" stroke="#0f172a" stroke-width="1.5"><path d="M12 17.27 18.18 21l-1.64-7.03L22 9.24l-7.19-.62L12 2 9.19 8.62 2 9.24l5.46 4.73L5.82 21z"/></svg></div><div class="caption">Title 10</div></div>
    </section>
  </main>

  <script>
    // 星星：點擊切換金色
    document.addEventListener('click', (e) => {
      const star = e.target.closest('.star');
      if (star) {
        const active = star.getAttribute('data-active') === 'true';
        star.setAttribute('data-active', String(!active));
        return;
      }
    });

    // R3：漢堡抽屜開關（事件委派，確保點到 SVG/PATH 也命中）
    const drawer = document.getElementById('drawer');
    const burger = document.querySelector('.burger');

    function openDrawer(){
      drawer.classList.add('open');
      drawer.setAttribute('aria-hidden','false');
      if (burger) burger.setAttribute('aria-expanded','true');
      document.body.style.overflow = 'hidden';
    }
    function closeDrawer(){
      drawer.classList.remove('open');
      drawer.setAttribute('aria-hidden','true');
      if (burger) burger.setAttribute('aria-expanded','false');
      document.body.style.overflow = '';
    }

    document.addEventListener('click', (e) => {
      if (e.target.closest('.burger')) { e.preventDefault(); openDrawer(); return; }
      if (e.target.closest('.drawer-close')) { e.preventDefault(); closeDrawer(); return; }
      // 抽屜開啟時，點抽屜外部也關閉（可選）
      if (drawer.classList.contains('open') && !e.target.closest('#drawer')) {
        closeDrawer();
      }
    });

    document.addEventListener('keydown', (e) => { if (e.key === 'Escape') closeDrawer(); });
  </script>

  <script>
  <script>
// ===== Task 3：資料抓取與渲染（純原生 DOM，不用 innerHTML） =====
const ENDPOINTS = [
  "https://raw.githubusercontent.com/cwpeng/test/master/assignment-3-1?_=" + Date.now(),
  "https://raw.githubusercontent.com/cwpeng/test/master/assignment-3-2?_=" + Date.now()
];

// 1) 抓 JSON（保險版：先取 text，確認一定是「[」開頭才 parse）
async function fetchJSON(url){
  const res = await fetch(url, { cache: "no-store" });
  if (!res.ok) throw new Error(`HTTP ${res.status} for ${url}`);
  const text = (await res.text()).trim();
  console.log("FETCH", url.split("?")[0], "→", text.slice(0, 60)); // 應該是 "[" 開頭

  if (!text.startsWith("[")) {
    throw new Error("Not a JSON array. Got: " + text.slice(0, 20));
  }
  return JSON.parse(text);
}

// 2) 從長字串中挑第一張圖片
function pickFirstImage(str){
  if (typeof str !== "string") return null;
  const m = str.match(/https?:\/\/[^\s'"]+\.(?:jpg|jpeg|png)/i);
  return m ? m[0] : null;
}

// 3) 正規化每筆景點資料 -> { name, firstImage }
function normalizeItem(raw){
  const name = raw.stitle || raw.name || raw.title || "";
  const imgField = raw.filelist || raw.files || raw.images || raw.img || raw.FILELIST || raw.IMAGES || "";
  const firstImage = Array.isArray(imgField) ? (imgField[0] || null) : pickFirstImage(String(imgField));
  return { name, firstImage };
}

// 小工具：清空容器
function clearChildren(node){
  while (node.firstChild) node.removeChild(node.firstChild);
}

// Bars：更新 #bar1 ~ #bar3
function renderBars(items){
  const ids = ["bar1","bar2","bar3"];
  ids.forEach((id, i) => {
    const el = document.getElementById(id);
    if (!el) return;
    const img = el.querySelector("img");
    const title = el.querySelector(".bar-title");
    const data = items[i];
    if (!data) return;
    if (img && data.firstImage) img.setAttribute("src", data.firstImage);
    if (title) title.textContent = data.name || "";
  });
}

// Blocks：.blocks 內動態建立 10 張 .card（僅在有資料時覆蓋）
function renderBlocks(items){
  const root = document.querySelector(".blocks");
  if (!root || !items?.length) return;

  clearChildren(root);

  items.forEach((it) => {
    const card = document.createElement("div");
    card.className = "card";

    const bg = document.createElement("div");
    bg.className = "card-bg";
    if (it.firstImage) bg.style.backgroundImage = `url('${it.firstImage}')`;

    const star = document.createElement("div");
    star.className = "star";
    star.setAttribute("data-active","false");
    const svgNS = "http://www.w3.org/2000/svg";
    const svg = document.createElementNS(svgNS, "svg");
    svg.setAttribute("viewBox","0 0 24 24");
    svg.setAttribute("fill","none");
    svg.setAttribute("stroke","#0f172a");
    svg.setAttribute("stroke-width","1.5");
    const path = document.createElementNS(svgNS, "path");
    path.setAttribute("d","M12 17.27 18.18 21l-1.64-7.03L22 9.24l-7.19-.62L12 2 9.19 8.62 2 9.24l5.46 4.73L5.82 21z");
    svg.appendChild(path);
    star.appendChild(svg);

    const cap = document.createElement("div");
    cap.className = "caption";
    cap.textContent = it.name || "";

    card.appendChild(bg);
    card.appendChild(star);
    card.appendChild(cap);
    root.appendChild(card);
  });
}

// 主流程
document.addEventListener("DOMContentLoaded", async () => {
  try {
    if (location.protocol === "file:") {
      console.warn("⚠️ 建議用 Live Server（http://localhost:...）開啟，避免本機檔案模式造成 fetch 限制。");
    }

    console.log("⏳ 抓取資料…");
    const results = await Promise.all(ENDPOINTS.map(fetchJSON));
    if (!Array.isArray(results[0]) || !Array.isArray(results[1])) {
      throw new Error("來源不是陣列 JSON");
    }

    const mergedRaw = results.flat();
    window.__merged = mergedRaw; // 方便你在 Console 檢查
    console.log("✅ 合併後總筆數：", mergedRaw.length, "第一筆原始：", mergedRaw[0]);

    const attractions = mergedRaw.map(normalizeItem);
    const top3 = attractions.slice(0, 3);
    const next10 = attractions.slice(3, 13);

    renderBars(top3);
    renderBlocks(next10);
    console.log("🎉 渲染完成（bars:", top3.length, ", blocks:", next10.length, ")");
  } catch (err) {
    console.error("❌ 載入景點資料失敗：", err);
  }
});
</script>

  

</script>

</body>
</html>
